# 홈즈냥즈 AI 에이전트 - 사용 가이드

**대화형 부동산 상담 AI 에이전트**

법률, 시장, 대출 상담을 한 번에! 터미널에서 직접 질문하고 실시간으로 답변을 받아보세요.

---

## 🚀 빠른 시작

### 1. 실행 방법

프로젝트 루트 폴더에서 다음 명령어를 실행하세요:

```bash
# Windows
python run_hn.py

# Mac/Linux
python3 run_hn.py
```

### 2. 질문하기

프로그램이 시작되면 `질문 >` 프롬프트가 나타납니다. 자연스럽게 질문을 입력하세요.

```
질문 > 강남구 아파트 시세 알려주세요
```

---

## 💡 주요 기능

### 1. 법률 상담 (LEGAL_CONSULT)
부동산 관련 법률 정보와 권리/의무를 안내합니다.

**예제 질문:**
- "전세금 5% 인상이 가능한가요?"
- "보증금 반환 안 받으면 어떻게 하나요?"
- "임대차보호법 적용 범위가 어떻게 되나요?"
- "계약금 돌려받을 수 있나요?"

### 2. 시장 조회 (MARKET_INQUIRY)
지역별 부동산 시세와 매물 정보를 제공합니다.

**예제 질문:**
- "강남구 아파트 시세 알려주세요"
- "서초구 전세 매물 있나요?"
- "송파구 아파트 값 어떻게 되나요?"
- "마포구 전세 시세는?"

### 3. 대출 상담 (LOAN_CONSULT)
주택 관련 대출 정보와 금리를 안내합니다.

**예제 질문:**
- "주택담보대출 금리 비교해주세요"
- "전세자금대출 조건이 어떻게 되나요?"
- "신혼부부 대출 한도는?"
- "생애최초 주택 구매 대출 알려주세요"

### 4. 복합 질문 (COMPREHENSIVE)
여러 분야를 동시에 질문할 수 있습니다.

**예제 질문:**
- "강남 아파트 매매가와 대출 한도 알려주세요"
- "서초 전세 계약 시 법적 주의사항과 금리는?"
- "전세 사기 예방 방법과 관련 법률은?"

---

## 🎮 명령어

프로그램 실행 중 다음 명령어를 사용할 수 있습니다:

| 명령어 | 설명 |
|--------|------|
| `help` | 예제 질문 보기 |
| `clear` | 화면 지우기 |
| `quit`, `exit`, `q` | 프로그램 종료 |

---

## 📋 실행 과정

질문을 입력하면 다음 5단계로 처리됩니다:

### Phase 1: 초기화
시스템 상태를 준비합니다.

### Phase 2: Intent 분석
질문의 의도를 AI가 파악합니다.
- 감지된 의도 (예: LEGAL_CONSULT, MARKET_INQUIRY)
- 신뢰도 (0-100%)
- 주요 키워드 추출
- 엔티티 인식 (지역, 가격, 계약 유형 등)

### Phase 3: 팀 실행
관련 정보를 검색합니다.
- Search Team: 법률 DB, 부동산 DB, 대출 DB 검색
- Analysis Team: 데이터 분석
- Document Team: 문서 생성

### Phase 4: 결과 통합
검색된 정보를 종합합니다.

### Phase 5: 답변 생성
AI가 자연스러운 답변을 작성합니다.

---

## 📊 출력 정보

### 질문 처리 과정
```
[Phase 1/5] 초기화
    상태 준비 중...

[Phase 2/5] Intent 분석
    질문의 의도를 파악하는 중...
✓ Intent 분석 완료
    감지된 의도: MARKET_INQUIRY
    신뢰도: 90%
    주요 키워드: 강남구, 아파트, 시세

[Phase 3/5] 팀 실행
    관련 정보 검색 중...
✓ 실행 완료: search
    search 팀: 부동산 DB (10건)

[Phase 4/5] 결과 통합
    검색 결과를 종합하는 중...
✓ 총 10개의 관련 정보 수집 완료

[Phase 5/5] 답변 생성
    AI가 답변을 작성하는 중...
✓ 답변 생성 완료
```

### 최종 답변
```
📝 답변
======================================================================

[AI가 생성한 상세 답변]

📊 실행 정보
======================================================================
  처리 시간: 12.34초
  상태: completed
```

---

## ⚙️ 설정

### 필수 요구사항
- Python 3.8 이상
- OpenAI API Key (환경변수 또는 설정 파일)
- 필수 패키지 설치

### 환경 설정

1. **가상환경 활성화** (권장)
```bash
# Windows
venv\Scripts\activate

# Mac/Linux
source venv/bin/activate
```

2. **패키지 설치**
```bash
pip install -r requirements.txt
```

3. **API Key 설정**
환경변수 또는 `.env` 파일에 OpenAI API Key를 설정하세요.

---

## 🎨 화면 색상

터미널에서 색상으로 정보를 구분합니다:

- 🔵 **파란색**: 제목 및 헤더
- 🟢 **초록색**: 성공 메시지 및 단계
- 🟡 **노란색**: 경고 메시지
- 🔴 **빨간색**: 에러 메시지
- 🟦 **청록색**: 상세 정보

---

## 🔧 문제 해결

### 1. 인코딩 오류
**증상**: 한글이 깨지거나 `UnicodeEncodeError` 발생

**해결**:
- Windows: 터미널을 UTF-8로 설정
```cmd
chcp 65001
```

### 2. 모듈을 찾을 수 없음
**증상**: `ModuleNotFoundError` 발생

**해결**:
```bash
pip install -r requirements.txt
```

### 3. API 호출 실패
**증상**: OpenAI API 호출 실패

**해결**:
- API Key 확인
- 네트워크 연결 확인
- API 사용량 제한 확인

### 4. DB 초기화 실패
**증상**: ChromaDB 또는 Legal DB 로딩 실패

**해결**:
- DB 파일 경로 확인
- 필요 패키지 설치: `pip install chromadb`

---

## 📈 성능

**테스트 결과** (100개 쿼리 기준):
- ✅ **평균 처리 시간**: 11-12초/쿼리
- ✅ **평균 신뢰도**: 85%
- ✅ **완료율**: 98.6%
- ✅ **안정성**: 100% (에러 0건)

---

## 🎯 사용 팁

### 1. 명확한 질문
구체적이고 명확한 질문일수록 정확한 답변을 받을 수 있습니다.

**좋은 예:**
- "강남구 대치동 아파트 전세 시세 알려주세요"
- "전세금 5% 인상이 법적으로 가능한가요?"

**개선 필요:**
- "아파트 값은?" (지역 정보 없음)
- "전세 어떻게 해요?" (구체적인 질문 없음)

### 2. 지역 정보 포함
시세나 매물 조회 시 지역명을 포함하세요.

**예:**
- "서초구 반포동 아파트 시세"
- "송파구 잠실 전세 매물"

### 3. 복합 질문
여러 정보를 한 번에 물어볼 수 있습니다.

**예:**
- "강남 아파트 매매가와 대출 한도는?"
- "전세 계약 시 법적 주의사항과 시세는?"

---

## 📞 지원

### 문의 및 피드백
- **이슈 리포트**: GitHub Issues
- **기능 제안**: GitHub Discussions
- **문서**: `backend/app/service_agent/reports/`

### 관련 문서
- 📊 [테스트 보고서](backend/app/service_agent/reports/FINAL_TEST_REPORT_100_QUERIES.md)
- 📋 [요약 보고서](backend/app/service_agent/reports/TEST_SUMMARY_FINAL.md)
- 🏗️ [아키텍처 문서](backend/app/service_agent/reports/ARCHITECTURE_COMPLETE.md)

---

## 🎉 즐거운 사용 되세요!

**홈즈냥즈 AI 에이전트**는 부동산 관련 정보를 빠르고 정확하게 제공합니다.

궁금한 점이 있으시면 언제든지 질문하세요! 💬

INFO - Analyzing intent for query: 집주인이 전세금 3억을 10억으로 올려달래. 법적으로 해결방법 알려줘...
INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO - LLM Call: intent_analysis | Model: gpt-4o-mini-2024-07-18 | Tokens: 3513 (prompt: 3194, completion: 319)
INFO - LLM Intent Analysis Result: {'intent': 'COMPREHENSIVE', 'confidence': 0.95, 'keywords': ['전세금', '인상', '법적', '해결방법'], 'sub_intents': ['LEGAL_CONSULT', 'RISK_ANALYSIS'], 'is_compound': True, 'decomposed_tasks': ['전세금 인상 한도 법률 조회', '3억→10억 인상의 타당성 분석', '구체적 대응 방안 제시'], 'entities': {'location': None, 'price': '3억→10억', 'contract_type': '전세', 'date': None, 'area': None, 'action_verbs': ['올려달래', '알려줘']}, 'reasoning': '1단계(구조): 상황 설명(전세금 3억을 10억으로 올려달라는 요청) + 해결책 요청 포함. 2단계(유형): 해결책 요청형 - 단순 정보가 아닌 대응방안 필요. 3단계(복잡도): 고 - 구체적 수치 비교와 복잡한 상황. 4단계(처리): 법률 검색 + 상황 분석 + 해결책 제시 필요. 5단계(검증): LEGAL_CONSULT만으로는 불충분, 종합적 분석 필요 → COMPREHENSIVE 선택.'}
INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO - LLM Call: agent_selection | Model: gpt-4o-mini-2024-07-18 | Tokens: 2554 (prompt: 2376, completion: 178)
INFO - LLM agent selection reasoning: 1단계: 사용자가 집주인의 전세금 인상 요구에 대한 법적 해결책을 요청하고 있어, 법률 정보 검색과 함께 상황 분석이 필요합니다. 2단계: 복잡한 상황이므로 검색과 분석이 모두 필요합니다. 3단계: 법률 정보를 검색한 후, 그에 대한 타당성을 분석해야 하므로 순차적으로 진행해야 합니다. 4단계: 단순 법률 조회로는 해결책을 제시할 수 없으므로, 분석 팀이 반드시 포함되어야 합니다.
INFO - ✅ Primary LLM selected agents: ['search_team', 'analysis_team']
INFO - AnalysisTeam subgraph built successfully
INFO - [AnalysisTeam] Preparing analysis
INFO - [AnalysisTeam] Analysis type: comprehensive
INFO - [AnalysisTeam] Preprocessing data
INFO - [AnalysisTeam] Analyzing data with analysis_tools
INFO - Initialized 5 analysis tools
INFO - Executing market_analyzer analysis
INFO - [AnalysisTools] Market analysis completed
INFO - Executing trend_analyzer analysis
INFO - [AnalysisTools] Trend analysis completed
INFO - Executing risk_assessor analysis
INFO - [AnalysisTools] Risk assessment completed
INFO - [CustomAnalysis] rent_increase_analysis performed
INFO - [AnalysisTeam] Generating insights
INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO - LLM Call: insight_generation | Model: gpt-4o-2024-08-06 | Tokens: 1120 (prompt: 509, completion: 611)
INFO - LLM Insight Generation: 3 insights generated
INFO - [AnalysisTeam] Creating report
INFO - [AnalysisTeam] Finalizing
INFO - [AnalysisTeam] Completed with status: completed

================================================================================
전세금 인상률 분석 테스트
================================================================================

쿼리: 집주인이 전세금 3억을 10억으로 올려달래. 법적으로 해결방법 알려줘

✓ LLM Context 초기화 완료

[Step 1] Intent 분석...
  감지된 의도: 종합분석
  신뢰도: 0.95
  제안된 에이전트: ['search_team', 'analysis_team']
  ✓ search_team과 analysis_team 모두 제안됨

[Step 2] 데이터 수집 시뮬레이션...
  ✓ 모의 검색 데이터 준비 완료

[Step 3] 실제 분석 수행...
  분석 상태: completed
  분석 시간: 14.03초

[Step 4] 분석 결과 검증...

  ✗ ERROR: No custom analysis found

  인사이트 개수: 3
  인사이트 내용:
    1. [key_finding] 전세금 인상 제한 법규: 한국에서는 전세금 인상에 대한 법적 제한이 존재합니다. 임대차보호법에 따라 전세금 인상률은 5%로 제한되어 있습니다.
    2. [risk] 전세금 인상 요구의 법적 분쟁 가능성: 전세금 인상 요구가 법적 상한선을 초과할 경우, 임대인과 임차인 간의 법적 분쟁이 발생할 수 있습니다.
    3. [opportunity] 임대차 계약 갱신의 협상 기회: 임대차 계약 갱신 시 임차인은 전세금 인상 외에도 계약 조건을 협상할 수 있는 기회를 가질 수 있습니다.

  보고서 제목: comprehensive 분석 보고서
  보고서 요약: comprehensive 분석을 완료했습니다. 3개의 주요 인사이트를 도출했으며, 신뢰도는 60%입니다.
  주요 발견사항:
    - 전세금 인상 제한 법규: 한국에서는 전세금 인상에 대한 법적 제한이 존재합니다. 임대차보호법에 따라 전세금 인상률은 5%로 제한되어 있습니다.
    - 전세금 인상 요구의 법적 분쟁 가능성: 전세금 인상 요구가 법적 상한선을 초과할 경우, 임대인과 임차인 간의 법적 분쟁이 발생할 수 있습니다.

================================================================================
테스트 결과 요약
================================================================================
✗ Intent detected as COMPREHENSIVE
✓ Both teams selected
✓ Analysis completed
✗ Custom analysis performed
✗ Increase rate calculated
✗ Legal limit exceeded
✓ NO MOCK DATA

통과: 3/7

⚠️ 4개 테스트 실패
================================================================================
